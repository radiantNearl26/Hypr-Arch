# Guide to set up colorschemw generated by Pywal in virtual consoles (tty) on boot before init

This guide will help you set up your virtual consoles (tty) to use the colorscheme generated by Pywal on boot, before the init system starts using mkinitcpio hooks.

1. **Copy the colorscheme to a persistent location:**

   First, ensure that the colorscheme generated by Pywal is saved in a location that will be accessible during boot. You can copy the colorscheme file to `/etc/pywal/colors` or maybe create a script that copies it there every time a new wallpaper is set. For this guide, we will copy it to `/etc/pywal/colors`.

   ```bash
   sudo cp this-folder/colors /etc/pywal/colors
   ```

2. **Copy the service file to the systemd system directory:**

   Next, copy the `wal-tty` service file to the `systemd/system` directory to ensure it runs at the appropriate time during boot.

   ```bash
   sudo cp this-folder/wal-tty.service /etc/systemd/system/wal-tty.service
   ```

3. **Copy the build hook 'early-initrd' from this folder to `/etc/initcpio/install/`:**

   The `early-initrd` hook is responsible for loading the colorscheme during the initramfs stage. Copy it to the `initcpio/install` directory.

   ```bash
   sudo cp this-folder/early-initrd /etc/initcpio/install/early-initrd
   ```

4. **Add the hook to your mkinitcpio configuration:**

   Edit your `/etc/mkinitcpio.conf` file to include the `early-initrd` hook in the `HOOKS` array. Make sure to add it before the `filesystems` hook and after the `systemd` hook, like so.

   ```bash
   HOOKS=(... systemd early-initrd filesystems ...)
   ```

5. **Rebuild the initramfs:**

   After modifying the mkinitcpio configuration, you need to rebuild the initramfs to apply the changes.

   ```bash
   sudo mkinitcpio -P
   ```

6. **Reboot your system:**

   Finally, reboot your system to see the changes take effect. Your virtual consoles should now display the colorscheme generated by Pywal during boot.

   ```bash
   sudo reboot
   ```

> [!NOTE]
> Ensure the file paths and names in the build hook file match your setup.
> Also, this guide works for my Arch Linux setup, where i use mkinitcpio for initramfs generation. If you are using a different distribution or initramfs generator, the steps may vary.
